<UserControl
    x:Class="WPFPath.View.CoolingTower"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:WPFPath.View"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    d:DesignHeight="450"
    d:DesignWidth="300"
    mc:Ignorable="d">
    <Border x:Name="frame" BorderThickness="1">
        <Viewbox HorizontalAlignment="Center" VerticalAlignment="Center">
            <Canvas
                Width="205"
                Height="245"
                Margin="5">
                <Path Data="M0,65 40,10 205,10 180,65" Fill="#EEE" />
                <Path
                    Canvas.Left="45"
                    Margin="0,15,0,0"
                    HorizontalAlignment="Center"
                    Data="M0 0A60 15 0 0 0 120 0L120 25A60 15 0 0 1 0 25">
                    <Path.Fill>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                            <GradientStop Offset="0" Color="#FFD6D6D6" />
                            <GradientStop Offset="0.519" Color="White" />
                            <GradientStop Offset="1" Color="#FFD6D6D6" />
                        </LinearGradientBrush>
                    </Path.Fill>
                </Path>
                <Ellipse
                    Canvas.Left="45"
                    Width="120"
                    Height="30"
                    VerticalAlignment="Top"
                    Fill="#CCC" />
                <Viewbox
                    Canvas.Left="45"
                    Canvas.Top="-40"
                    Width="110"
                    Height="110"
                    RenderTransformOrigin="0.5,0.5">
                    <Viewbox.RenderTransform>
                        <TransformGroup>
                            <RotateTransform x:Name="rt" Angle="4" />
                            <ScaleTransform ScaleY="0.25" />
                        </TransformGroup>
                    </Viewbox.RenderTransform>
                    <Path Data="M306.730667 307.242667l-2.432-7.125334c-10.24-30.570667-16.298667-57.429333-16.298667-76.586666C288 105.109333 393.813333 10.666667 522.666667 10.666667s234.666667 94.442667 234.666666 212.864c0 24.64-7.146667 44.522667-21.76 63.125333 21.248-5.973333 39.850667-9.322667 54.229334-9.322667C908.224 277.333333 1002.666667 383.146667 1002.666667 512s-94.442667 234.666667-212.864 234.666667c-16.682667 0-31.189333-3.285333-44.586667-9.941334 7.68 25.237333 12.117333 47.296 12.117333 63.744 0 118.421333-105.813333 212.864-234.666666 212.864s-234.666667-94.442667-234.666667-212.864c0-28.842667 9.792-51.157333 29.909333-72.533333-33.514667 11.690667-63.082667 18.730667-83.712 18.730667C115.776 746.666667 21.333333 640.853333 21.333333 512s94.442667-234.666667 212.864-234.666667c26.922667 0 48.170667 8.533333 68.266667 26.026667l4.266667 3.882667zM522.666667 74.666667c-95.018667 0-170.666667 67.498667-170.666667 148.864 0 45.589333 58.773333 177.536 114.090667 255.445333 18.688 26.346667-9.024 60.672-38.72 47.936-42.026667-18.048-72.192-46.336-104.106667-90.816l-5.034667-7.168c-5.546667-7.936-24.661333-36.650667-28.928-42.773333l-3.242666-4.586667C264.832 351.893333 250.922667 341.333333 234.197333 341.333333 152.832 341.333333 85.333333 416.981333 85.333333 512c0 95.018667 67.498667 170.666667 148.864 170.666667 45.589333 0 177.493333-58.773333 255.445334-114.069334 26.346667-18.688 60.650667 9.024 47.914666 38.72-18.026667 42.026667-46.336 72.170667-90.794666 104.085334l-7.168 5.034666c-7.936 5.546667-36.650667 24.661333-42.773334 28.928l-4.586666 3.242667c-29.674667 21.226667-40.234667 35.136-40.234667 51.861333 0 81.365333 75.648 148.864 170.666667 148.864 95.018667 0 170.666667-67.498667 170.666666-148.864 0-41.216-48.832-155.562667-101.056-236.16-19.413333-29.994667 17.450667-64.426667 46.037334-43.029333 23.125333 17.301333 41.941333 38.058667 62.336 66.517333l5.12 7.253334c5.546667 7.957333 24.661333 36.672 28.928 42.794666l3.242666 4.586667C759.168 672.106667 773.077333 682.666667 789.802667 682.666667 871.168 682.666667 938.666667 607.018667 938.666667 512c0-95.018667-67.498667-170.666667-148.864-170.666667-38.933333 0-144.213333 43.861333-224.725334 93.824-28.629333 17.770667-61.738667-15.125333-44.16-43.882666 18.410667-30.122667 42.410667-53.333333 77.184-78.336l7.637334-5.376c7.936-5.546667 36.650667-24.661333 42.773333-28.928l4.586667-3.242667c29.674667-21.226667 40.234667-35.136 40.234666-51.861333 0-81.365333-75.648-148.864-170.666666-148.864z" Fill="Red" />
                </Viewbox>
                <Grid
                    Grid.Row="1"
                    Canvas.Top="65"
                    Width="180"
                    Height="180"
                    Background="LightGray">
                    <Border
                        Height="140"
                        VerticalAlignment="Top"
                        BorderThickness="10">
                        <Border.Background>
                            <DrawingBrush
                                TileMode="Tile"
                                Viewport="1,0,25,1"
                                ViewportUnits="Absolute">
                                <DrawingBrush.Drawing>
                                    <GeometryDrawing>
                                        <GeometryDrawing.Pen>
                                            <Pen Brush="#EEE" />
                                        </GeometryDrawing.Pen>
                                        <GeometryDrawing.Geometry>
                                            <PathGeometry>
                                                <PathFigure IsClosed="False">
                                                    <LineSegment Point="10,0" />
                                                    <LineSegment Point="10,10" />
                                                </PathFigure>
                                            </PathGeometry>
                                        </GeometryDrawing.Geometry>
                                    </GeometryDrawing>
                                </DrawingBrush.Drawing>
                            </DrawingBrush>
                        </Border.Background>
                    </Border>
                    <Grid
                        Height="40"
                        Margin="5"
                        VerticalAlignment="Bottom">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Border Margin="2" Background="#FFAAAAAA" />
                        <Border
                            Grid.Column="1"
                            Margin="2"
                            Background="#FFAAAAAA" />
                    </Grid>
                </Grid>

                <Grid
                    Grid.Row="1"
                    Canvas.Left="180"
                    Canvas.Top="65"
                    Width="180"
                    Height="180"
                    Background="LightGray">
                    <Grid.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform ScaleX="0.139" />
                            <SkewTransform AngleY="-65.5" />
                        </TransformGroup>
                    </Grid.RenderTransform>
                    <Border
                        Height="140"
                        VerticalAlignment="Top"
                        BorderThickness="10">
                        <Border.Background>
                            <DrawingBrush
                                TileMode="Tile"
                                Viewport="1,0,25,1"
                                ViewportUnits="Absolute">
                                <DrawingBrush.Drawing>
                                    <GeometryDrawing>
                                        <GeometryDrawing.Pen>
                                            <Pen Brush="#EEE" />
                                        </GeometryDrawing.Pen>
                                        <GeometryDrawing.Geometry>
                                            <PathGeometry>
                                                <PathFigure>
                                                    <LineSegment Point="10,0" />
                                                    <LineSegment Point="10,10" />
                                                </PathFigure>
                                            </PathGeometry>
                                        </GeometryDrawing.Geometry>
                                    </GeometryDrawing>
                                </DrawingBrush.Drawing>
                            </DrawingBrush>
                        </Border.Background>
                    </Border>
                    <Grid
                        Height="40"
                        Margin="5"
                        VerticalAlignment="Bottom">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Border Margin="2" Background="#FFAAAAAA" />
                        <Border
                            Grid.Column="1"
                            Margin="2"
                            Background="#FFAAAAAA" />
                    </Grid>
                </Grid>

                <Border
                    Canvas.Left="150"
                    Canvas.Top="80"
                    Width="18"
                    Height="18"
                    CornerRadius="10">
                    <Border.Background>
                        <RadialGradientBrush>
                            <GradientStop x:Name="gsGreen" Offset="0.5" Color="Gray" />
                            <GradientStop Color="White" />
                        </RadialGradientBrush>
                    </Border.Background>
                </Border>

                <Border
                    Canvas.Left="150"
                    Canvas.Top="105"
                    Width="18"
                    Height="18"
                    CornerRadius="10">
                    <Border.Background>
                        <RadialGradientBrush>
                            <GradientStop x:Name="gsRed1" Offset="0.6" Color="Gray" />
                            <GradientStop Color="White" />
                        </RadialGradientBrush>
                    </Border.Background>
                </Border>
            </Canvas>
        </Viewbox>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup Name="SelectStateGroup">
                <VisualState Name="Selected">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="frame" Storyboard.TargetProperty="(Border.BorderBrush)">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <SolidColorBrush Color="Orange" />
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
                <VisualState Name="Unselected" />
            </VisualStateGroup>
            <VisualStateGroup Name="RunStateGroup">
                <VisualState Name="RunState">
                    <Storyboard>
                        <DoubleAnimation
                            RepeatBehavior="Forever"
                            Storyboard.TargetName="rt"
                            Storyboard.TargetProperty="(RotateTransform.Angle)"
                            From="0"
                            To="-360"
                            Duration="00:0:0.5" />

                        <ColorAnimationUsingKeyFrames Storyboard.TargetName="gsGreen" Storyboard.TargetProperty="Color">
                            <DiscreteColorKeyFrame KeyTime="0" Value="Green" />
                        </ColorAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
                <VisualState Name="Stop" />
            </VisualStateGroup>
            <VisualStateGroup x:Name="FaultStateGroup">
                <VisualState Name="FaultState">
                    <Storyboard>
                        <ColorAnimationUsingKeyFrames
                            RepeatBehavior="Forever"
                            Storyboard.TargetName="gsRed1"
                            Storyboard.TargetProperty="Color">
                            <DiscreteColorKeyFrame KeyTime="0:0:0.5" Value="Red" />
                            <DiscreteColorKeyFrame KeyTime="0:0:1" Value="Gray" />
                        </ColorAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
                <VisualState Name="NormalState" />
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </Border>
</UserControl>
